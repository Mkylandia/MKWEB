/* styles.css - MKWEB OS 7 Custom: Ultimate Elegance & Customization */

/* ===== Grundlegende Variablen & Theming-Struktur ===== */
:root {
  /* Fluid Typography & Spacing */
  --fluid-min-font: 0.65vw;
  --fluid-max-font: 0.95vw;
  --fluid-header-font: 1.15vw;
  --fluid-time-font: 3.2vw;
  --fluid-padding-s: clamp(0.35rem, 0.45vw + 0.25vh, 1.1rem);
  --fluid-padding-m: clamp(0.55rem, 0.8vw + 0.4vh, 1.4rem);
  --fluid-padding-l: clamp(0.8rem, 1.05vw + 0.55vh, 1.95rem);
  --fluid-padding-xl: clamp(1rem, 1.25vw + 0.65vh, 2.45rem);
  --fluid-gap-xs: clamp(0.2rem, 0.25vw + 0.1vh, 0.6rem);
  --fluid-gap-s: clamp(0.3rem, 0.4vw + 0.2vh, 0.9rem);
  --fluid-gap-m: clamp(0.42rem, 0.5vw + 0.25vh, 1.3rem);

  /* Transitions & Radii */
  --t-fast: 0.18s;
  --t-normal: 0.32s;
  --t-slow: 0.5s;
  --t-timing-bounce: cubic-bezier(0.34, 1.65, 0.64, 1.1);
  --t-timing-smooth: cubic-bezier(0.26, 0.53, 0.46, 0.99);
  --t-timing-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
  --hover-transition: all var(--t-normal) var(--t-timing-smooth);
  --r: 16px;
  --border-width: 1px;
  --content-max-width: 1800px;
}

/* --- THEMES --- */
/* Default: Dark Purple */
body[data-theme="dark-purple"] {
  --bg: #0e0e0e; --fg: #f8f8f8; --dim: rgba(248,248,248,0.65);
  --acc: #8a4ed4; --ah: #b080ff;
  --gl: rgba(255,255,255,0.06); --gb: rgba(255,255,255,0.14);
  --s: 0 5px 15px rgba(0,0,0,0.1); --sh: 0 9px 24px rgba(0,0,0,0.15);
  --acc-rgb: 138, 78, 212; --fg-rgb: 248, 248, 248;
}
/* Dark Cyan */
body[data-theme="dark-cyan"] {
  --bg: #0A192F; --fg: #E6F1FF; --dim: #8892B0;
  --acc: #64FFDA; --ah: #7effe5;
  --gl: rgba(100, 255, 218, 0.07); --gb: rgba(100, 255, 218, 0.15);
  --s: 0 5px 15px rgba(0,0,0,0.2); --sh: 0 9px 24px rgba(0,0,0,0.3);
  --acc-rgb: 100, 255, 218; --fg-rgb: 230, 241, 255;
}
/* Light Blue */
body[data-theme="light-blue"] {
  --bg: #f0f4f8; --fg: #102a43; --dim: #5a7a9d;
  --acc: #2563eb; --ah: #538bff;
  --gl: rgba(255,255,255,0.5); --gb: rgba(200,210,220,0.6);
  --s: 0 5px 15px rgba(0,0,0,0.05); --sh: 0 9px 24px rgba(0,0,0,0.08);
  --acc-rgb: 37, 99, 235; --fg-rgb: 16, 42, 67;
}
/* Forest */
body[data-theme="forest"] {
  --bg: #212529; --fg: #E9ECEF; --dim: #ADB5BD;
  --acc: #49B675; --ah: #66d493;
  --gl: rgba(255,255,255,0.07); --gb: rgba(255,255,255,0.15);
  --s: 0 5px 15px rgba(0,0,0,0.15); --sh: 0 9px 24px rgba(0,0,0,0.2);
  --acc-rgb: 73, 182, 117; --fg-rgb: 233, 236, 239;
}
/* Sunset */
body[data-theme="sunset"] {
  --bg: #2d142c; --fg: #fff5f5; --dim: #e4c3c3;
  --acc: #ee4540; --ah: #ff6b66;
  --gl: rgba(238, 69, 64, 0.1); --gb: rgba(238, 69, 64, 0.2);
  --s: 0 5px 15px rgba(0,0,0,0.2); --sh: 0 9px 24px rgba(0,0,0,0.3);
  --acc-rgb: 238, 69, 64; --fg-rgb: 255, 245, 245;
}


/* ===== Basis-Stile ===== */
html {
  scroll-behavior: smooth;
  font-size: clamp(7px, 0.65vw + 0.4vh, 18px);
}
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
body {
  background: var(--bg); color: var(--fg);
  height: 100vh; width: 100vw; overflow: hidden;
  display: flex; flex-direction: column; position: relative;
  transition: background 0.5s ease, color 0.5s ease;
}

/* ===== Container & Layout ===== */
.container {
  position: relative; z-index: 2; height: 100%;
  padding: var(--fluid-padding-xl); display: flex; flex-direction: column;
  align-items: center; gap: var(--fluid-gap-m); flex-grow: 1;
}
.main-grid {
  width: 100%; max-width: var(--content-max-width); height: 100%;
  display: grid; grid-template-columns: 1fr 1fr; gap: var(--fluid-gap-m);
}
.grid-left, .grid-right {
  display: flex; flex-direction: column; gap: var(--fluid-gap-m);
}

/* ===== Glas-Effekt & Allgemeine Elemente ===== */
.glass {
  background: var(--gl); backdrop-filter: blur(16px) saturate(140%);
  border: var(--border-width) solid var(--gb); border-radius: var(--r);
  box-shadow: var(--s); transition: var(--hover-transition);
}
.glass:hover { box-shadow: var(--sh); transform: translateY(-2px); }
button {
  padding: var(--fluid-padding-s); font-weight: 600; cursor: pointer;
  text-align: center; color: var(--fg);
  font-size: clamp(0.58rem, var(--fluid-min-font), 0.92rem);
}
button:hover {
  transform: translateY(-3px); box-shadow: 0 6px 18px rgba(var(--acc-rgb), 0.15);
  color: var(--ah);
}
.controls button .material-symbols-outlined { font-size: 1.5em; vertical-align: middle; }

/* ===== Header ===== */
.header {
  display: flex; justify-content: space-between; align-items: center;
  width: 100%; max-width: var(--content-max-width);
  padding: var(--fluid-padding-s) var(--fluid-padding-l);
}
.logo {
  font-size: clamp(1.1rem, var(--fluid-header-font), 2.3rem); font-weight: 800;
  background: linear-gradient(65deg, var(--acc), var(--ah));
  -webkit-background-clip: text; background-clip: text;
  -webkit-text-fill-color: transparent;
}
.controls { display: flex; gap: var(--fluid-gap-s); align-items: center; }
.user-avatar {
  width: clamp(26px, 3vw, 46px); height: clamp(26px, 3vw, 46px);
  border-radius: 50%; display: flex; justify-content: center;
  align-items: center; font-size: clamp(0.95rem, 1.15vw, 2.1rem);
  background: var(--gl); border: var(--border-width) solid var(--gb);
  color: var(--acc); cursor: pointer; transition: all 0.3s ease, opacity 0.4s ease;
}
.user-avatar.hidden-avatar { opacity: 0; transform: scale(0.8); pointer-events: none; }

/* ===== Suchmaschinen-Auswahl ===== */
.search-section { padding: var(--fluid-padding-s); display: flex; flex-direction: column; justify-content: center; }
.search-engines { display: flex; gap: var(--fluid-gap-xs); margin-bottom: var(--fluid-padding-s); flex-wrap: wrap; justify-content: center; }
.search-engine {
  padding: clamp(0.25rem, 0.45vw, 0.75rem) clamp(0.5rem, 0.85vw, 1.15rem);
  border-radius: 30px; font-weight: 600; border: 1px solid transparent;
  font-size: clamp(0.6rem, 0.88vw, 1rem); color: var(--fg);
  transition: all 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}
.search-engine:hover { transform: translateY(-4px) scale(1.05); box-shadow: 0 6px 16px rgba(var(--acc-rgb), 0.2); }
.search-engine.active {
  background: linear-gradient(130deg, var(--acc), var(--ah)); color: #fff;
  border-color: rgba(255,255,255,0.3);
  box-shadow: 0 0 20px rgba(var(--acc-rgb), 0.3);
  transform: translateY(-3px) scale(1.08);
}

/* ===== Suchbox ===== */
.search-box {
  display: flex; align-items: center; border-radius: var(--r);
  padding: var(--fluid-padding-s); border: 1px solid var(--gb);
}
.search-box:focus-within {
  transform: translateY(-3px); box-shadow: 0 8px 25px rgba(var(--acc-rgb), 0.25);
  border-color: var(--acc);
}
.search-icon { font-size: clamp(1rem, 1.2vw, 1.8rem); color: var(--dim); transition: all 0.3s ease; }
.search-box:focus-within .search-icon { color: var(--ah); }
#search {
  flex: 1; border: none; background: transparent; color: var(--fg);
  font-size: clamp(0.7rem, var(--fluid-max-font), 1.15rem); outline: none;
  margin-left: var(--fluid-padding-xs); padding: 0.3rem 0;
}
#search::placeholder { color: var(--dim); }

/* ===== Zeit-Anzeige ===== */
.time-display {
  text-align: center; padding: var(--fluid-padding-l); display: flex;
  flex-direction: column; justify-content: center;
}
#time {
  font-size: clamp(2.2rem, var(--fluid-time-font), 7rem); font-weight: 800;
  background: linear-gradient(65deg, var(--acc), var(--ah));
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
#date { font-size: clamp(0.55rem, var(--fluid-min-font), 1.1rem); color: var(--dim); text-transform: uppercase; }

/* ===== Zitate & Wetter ===== */
.quote-section { padding: var(--fluid-padding-l); text-align: center; display: flex; flex-direction: column; justify-content: center;}
#quote-text { font-size: clamp(0.9rem, var(--fluid-max-font), 1.3rem); font-style: italic; max-width: 85%; margin: auto;}
#quote-author { font-size: clamp(0.58rem, var(--fluid-min-font), 1.05rem); color: var(--dim); margin-top: var(--fluid-gap-s);}
.weather-link-section { padding: var(--fluid-padding-s); display: flex; flex-direction: column; align-items: center; justify-content: center;}
.weather-link-button { display: inline-flex; align-items: center; gap: var(--fluid-gap-s); padding: var(--fluid-padding-s) var(--fluid-padding-m); text-decoration: none; font-weight: 600;}
.weather-link-button .weather-icon { font-size: clamp(1.1rem, 1.3vw, 2.4rem); color: var(--acc); }
.weather-notice { margin-top: var(--fluid-padding-s); font-size: clamp(0.55rem, var(--fluid-min-font), 0.9rem); color: var(--dim); }

/* ===== Apps ===== */
.apps-section { padding: var(--fluid-padding-s); }
.apps-section h2 { margin-bottom: var(--fluid-padding-s); font-size: clamp(0.8rem, var(--fluid-header-font), 1.5rem); text-align: center; color: var(--fg); }
.apps-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(clamp(60px, 7vw, 104px), 1fr)); gap: var(--fluid-gap-s); }
.app-card {
  padding: clamp(0.4rem, 0.6vw, 1.1rem); text-decoration: none; display: flex;
  flex-direction: column; align-items: center; justify-content: center; aspect-ratio: 1 / 1;
}
.app-card:hover { transform: translateY(-5px) scale(1.03); z-index: 10; }
.app-card .icon { font-family: 'Material Symbols Outlined'; font-size: clamp(1.1rem, 2.2vw, 2.7rem); margin-bottom: clamp(0.15rem, 0.3vw, 0.6rem); color: var(--fg)}
.app-card:hover .icon, .app-card:hover .label { color: var(--ah); }
.app-card .label { font-size: clamp(0.45rem, 0.6vw, 1rem); text-align: center; color: var(--dim) }

/* ===== EINSTELLUNGEN MODAL ===== */
.settings-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); backdrop-filter: blur(10px);
    z-index: 1999; display: flex; align-items: center; justify-content: center;
    transition: opacity 0.3s ease;
}
.settings-overlay.hidden { opacity: 0; pointer-events: none; }
.settings-modal {
    width: 90%; max-width: 500px; padding: var(--fluid-padding-l);
    transform: scale(1); transition: transform 0.3s ease;
}
.settings-overlay.hidden .settings-modal { transform: scale(0.95); }
.settings-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--fluid-padding-m); }
.settings-header h2 { font-size: var(--fluid-header-font); }
#settingsCloseBtn { padding: var(--fluid-padding-s); }
.settings-content h3 { margin-bottom: var(--fluid-padding-s); color: var(--dim); text-transform: uppercase; font-size: var(--fluid-min-font); }
.theme-selector { display: flex; gap: var(--fluid-gap-m); margin-bottom: var(--fluid-padding-m); }
.theme-swatch {
    width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
    border: 3px solid transparent; background-origin: border-box;
    transition: all 0.2s ease; position: relative;
}
.theme-swatch:hover { transform: scale(1.1); }
.theme-swatch.active { border-color: var(--ah); box-shadow: 0 0 15px rgba(var(--acc-rgb), 0.5); }
/* Swatch colors */
.theme-swatch[data-theme="dark-purple"] { background-color: #8a4ed4; }
.theme-swatch[data-theme="dark-cyan"]   { background-color: #64FFDA; }
.theme-swatch[data-theme="light-blue"]  { background-color: #2563eb; }
.theme-swatch[data-theme="forest"]      { background-color: #49B675; }
.theme-swatch[data-theme="sunset"]      { background-color: #ee4540; }
.settings-divider { border: none; height: 1px; background: var(--gb); margin: var(--fluid-padding-l) 0; }
.setting-toggle { display: flex; justify-content: space-between; align-items: center; }

/* ===== DYNAMIC ISLAND (VERBESSERT) ===== */
.dynamic-island-container {
    position: fixed; top: var(--fluid-padding-m); left: 50%;
    transform: translateX(-50%); z-index: 1000; perspective: 1000px;
}
.dynamic-island {
    display: flex; align-items: center; justify-content: space-between;
    gap: var(--fluid-gap-s); padding: var(--fluid-padding-s); background-color: var(--bg);
    border-radius: 50px; box-shadow: var(--s); border: 1px solid var(--gb);
    color: var(--fg); cursor: pointer;
    transition: all 0.5s var(--t-timing-elastic);
    width: 220px; /* Startbreite */
}
.dynamic-island:hover {
  box-shadow: 0 0 20px rgba(var(--acc-rgb), 0.25), var(--sh);
  border-color: var(--acc); transform: translateY(-2px);
}
.dynamic-island.expanded { width: 380px; padding: var(--fluid-padding-s) var(--fluid-padding-m); }
/* Fader für Content-Wechsel */
.island-content-fader { position: relative; flex-grow: 1; overflow: hidden; }
.island-content-wrapper {
    display: block; opacity: 1;
    transition: opacity 0.4s ease-in-out;
}
.island-content-wrapper:not(.active) {
    position: absolute; top: 0; left: 0; width: 100%;
    opacity: 0; pointer-events: none;
}
.island-content { display: flex; align-items: center; gap: var(--fluid-gap-s); white-space: nowrap; }
#islandIcon, #islandIconNext { font-size: 1.5rem; color: var(--acc); transition: transform 0.4s var(--t-timing-elastic); }
.dynamic-island.expanded #islandIcon { transform: scale(1.15); }
.island-details { display: flex; flex-direction: column; overflow: hidden; }
#islandTitle, #islandTitleNext { font-weight: 700; font-size: var(--fluid-min-font); text-overflow: ellipsis; overflow: hidden; }
#islandSubtitle, #islandSubtitleNext { font-size: calc(var(--fluid-min-font) * 0.85); color: var(--dim); text-overflow: ellipsis; overflow: hidden;}
.island-waveform { display: none; align-items: center; gap: 3px; }
.island-waveform.active { display: flex; }
.island-waveform span { width: 4px; height: 20px; background: linear-gradient(130deg, var(--acc), var(--ah)); border-radius: 2px; animation: wave 1.5s ease-in-out infinite alternate; }
.island-waveform span:nth-child(2) { animation-delay: -0.3s; }
.island-waveform span:nth-child(3) { animation-delay: -0.6s; }
.island-waveform span:nth-child(4) { animation-delay: -0.9s; }
@keyframes wave { from { transform: scaleY(0.2); } to { transform: scaleY(1); } }
.island-dismiss { display: none; background: rgba(var(--fg-rgb), 0.1); border: none; border-radius: 50%; width: 28px; height: 28px; cursor: pointer; align-items: center; justify-content: center; padding: 0; }
.dynamic-island.expanded .island-dismiss { display: flex; }

/* ===== Media Queries ===== */
@media (max-width: 992px) {
  .main-grid { grid-template-columns: 1fr; }
  .dynamic-island-container { width: calc(100% - (2 * var(--fluid-padding-s))); left: var(--fluid-padding-s); transform: translateX(0%); }
  .dynamic-island.expanded { width: 100%; }
}
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
.hidden { display: none !important; }
